<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.4.1.js"
      integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="https://kit.fontawesome.com/1469ef8650.js"></script>

    <title>Friend Finder | Survey</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1 class="mt-3">Survey Questions</h1>
          <hr class="my-4" />
          <h3>About You</h3>
          <form>
            <div class="form-group">
              <label for="name">Name (Required)</label>
              <input class="form-control" id="name" />
            </div>
            <div class="form-group">
              <label for="photo">Link to Photo Image (Required)</label>
              <input class="form-control" id="photo" />
            </div>
            <hr class="my-4" />
            <h3>Question 1</h3>
            <div class="form-group">
              <label for="question1">
                Your mind is always buzzing with unexplored ideas and plans.
              </label>
              <select class="form-control" id="question1">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 2</h3>
            <div class="form-group">
              <label for="question2">
                Generally speaking, you rely more on your experience than your
                imagination.
              </label>
              <select class="form-control" id="question2">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 3</h3>
            <div class="form-group">
              <label for="question3">
                You find it easy to stay relaxed and focused even when there is
                some pressure.
              </label>
              <select class="form-control" id="question3">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 4</h3>
            <div class="form-group">
              <label for="question4">
                You rarely do something just out of sheer curiosity.
              </label>
              <select class="form-control" id="question4">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 5</h3>
            <div class="form-group">
              <label for="question5">
                People can rarely upset you.
              </label>
              <select class="form-control" id="question5">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 6</h3>
            <div class="form-group">
              <label for="question6">
                It is often difficult for you to relate to other people’s
                feelings.
              </label>
              <select class="form-control" id="question6">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 7</h3>
            <div class="form-group">
              <label for="question7">
                In a discussion, truth should be more important than people’s
                sensitivities.
              </label>
              <select class="form-control" id="question7">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 8</h3>
            <div class="form-group">
              <label for="question8">
                You rarely get carried away by fantasies and ideas.
              </label>
              <select class="form-control" id="question8">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 9</h3>
            <div class="form-group">
              <label for="question9">
                You think that everyone’s views should be respected regardless
                of whether they are supported by facts or not.
              </label>
              <select class="form-control" id="question9">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
            <h3>Question 10</h3>
            <div class="form-group">
              <label for="question10">
                You feel more energetic after spending time with a group of
                people.
              </label>
              <select class="form-control" id="question10">
                <option></option>
                <option>1 (Strongly Disagree)</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 (strongly Agree)</option>
              </select>
            </div>
          </form>
          <button type="button" class="btn btn-primary" id="submit">
            <i class="fas fa-check-circle mr-1"></i>
            Submit
          </button>
        </div>
      </div>
      <hr class="my-4" />
      <div class="row">
        <a href="/api/friends" class="ml-4">API Friends List</a>
        <p class="mx-1">|</p>
        <a href="https://github.com/andreain3d/FriendFinder">GitHub Repo</a>
      </div>
      <!--Modal-->
      <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title">Best Match</h2>
            </div>
            <div class="modal-body">
              <h4 id="matchName"></h4>
              <img src="" id="matchPhoto" />
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-default"
                data-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      $("#submit").on("click", function(event) {
        event.preventDefault();

        var checkForm = function() {
          var answered = true;

          $(".form-control").each(function() {
            console.log($(this).val());
            if ($(this).val() === "") {
              answered = false;
            }
          });
          return answered;
        };

        if (checkForm()) {
          var scoresArray = [];

          scoresArray.push(
            parseInt(
              $("#question1")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question2")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question3")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question4")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question5")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question6")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question7")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question8")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question9")
                .val()
                .slice(0, 1)
            )
          );
          scoresArray.push(
            parseInt(
              $("#question10")
                .val()
                .slice(0, 1)
            )
          );

          var newFriend = {
            name: $("#name")
              .val()
              .trim(),
            photo: $("#photo")
              .val()
              .trim(),
            scores: scoresArray
          };

          $.get("/api/friends/", function(data) {
            console.log(data);
            $.post("/api/friends", newFriend).then(function(data) {
              console.log("friend added");
              $("#matchName").text(data.name);
              $("#matchPhoto").attr("src", data.photo);
              $("#myModal").modal("toggle");
            });
          });
        } else {
          alert("Please answer every question.");
        }
      });
    </script>
  </body>
</html>
